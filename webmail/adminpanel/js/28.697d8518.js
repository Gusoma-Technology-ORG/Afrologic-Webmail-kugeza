(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"3b2e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-scroll-area",{staticClass:"full-height full-width"},[a("div",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row q-mb-md"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.HEADING_SETTINGS_TAB",expression:"'MAILWEBCLIENT.HEADING_SETTINGS_TAB'"}],staticClass:"col text-h5"})]),a("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-2"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_TENANT_SPACE_LIMIT",expression:"'MAILWEBCLIENT.LABEL_TENANT_SPACE_LIMIT'"}],staticClass:"q-my-sm"})]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"row"},[a("q-input",{staticClass:"col-5",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:t.tenantSpaceLimitMb,callback:function(e){t.tenantSpaceLimitMb=e},expression:"tenantSpaceLimitMb"}}),a("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-ma-sm col-1",staticStyle:{"margin-top":"10px"}})],1)])]),a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-2"}),a("div",{staticClass:"col-8 q-mb-sm"},[a("q-item-label",{attrs:{caption:""}},[t._v("\n              "+t._s(t.$t("MAILWEBCLIENT.HINT_TENANT_SPACE_LIMIT"))+"\n            ")])],1)]),t.allowChangeUserSpaceLimit?a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_USER_SPACE_LIMIT",expression:"'MAILWEBCLIENT.LABEL_USER_SPACE_LIMIT'"}],staticClass:"q-my-sm"})]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"row"},[a("q-input",{staticClass:" col-5",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:t.userSpaceLimitMb,callback:function(e){t.userSpaceLimitMb=e},expression:"userSpaceLimitMb"}}),a("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-ma-sm col-1",staticStyle:{"margin-top":"10px"}})],1)])]):t._e(),t.allowChangeUserSpaceLimit?a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-2"}),a("div",{staticClass:"col-8 q-mt-sm"},[a("q-item-label",{attrs:{caption:""}},[t._v("\n              "+t._s(t.$t("MAILWEBCLIENT.HINT_USER_SPACE_LIMIT"))+"\n            ")])],1)]):t._e(),a("div",{staticClass:"row"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"MAILWEBCLIENT.LABEL_ALLOCATED_TENANT_SPACE",expression:"'MAILWEBCLIENT.LABEL_ALLOCATED_TENANT_SPACE'"}],staticClass:"col-2"}),a("div",{staticClass:"col-4"},[a("span",[t._v(t._s(t.allocatedSpace))]),a("span",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-mx-sm q-pb-sm col-1"})])])])],1),a("div",{staticClass:"q-pt-md text-right"},[a("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:t.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:t.save}})],1)],1),a("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:t.loading||t.saving}},[a("q-linear-progress",{attrs:{query:""}})],1)],1)},s=[],n=a("4245"),l=a("21ac"),c=a("6bfe"),o=a("e539"),r={name:"MailAdminSettingsPerTenant",data:function(){return{saving:!1,loading:!1,tenantSpaceLimitMb:"",userSpaceLimitMb:"",allocatedSpace:"",tenant:null,allowChangeUserSpaceLimit:!1}},computed:{tenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},allTenants:function(){return this.$store.getters["tenants/getTenants"]}},watch:{allTenants:function(){this.populate()}},beforeRouteLeave:function(t,e,a){this.doBeforeRouteLeave(t,e,a)},mounted:function(){this.loading=!1,this.saving=!1,this.populate()},methods:{hasChanges:function(){var t;if(this.loading)return!1;var e=c["a"].pObject(null===(t=this.tenant)||void 0===t?void 0:t.completeData),a=e["MailWebclient::TenantSpaceLimitMb"],i=e["MailWebclient::UserSpaceLimitMb"];return c["a"].pInt(this.tenantSpaceLimitMb)!==a||this.allowChangeUserSpaceLimit&&c["a"].pInt(this.userSpaceLimitMb)!==i},revertChanges:function(){var t,e=c["a"].pObject(null===(t=this.tenant)||void 0===t?void 0:t.completeData);this.tenantSpaceLimitMb=e["MailWebclient::TenantSpaceLimitMb"],this.userSpaceLimitMb=e["MailWebclient::UserSpaceLimitMb"]},populate:function(){var t=this.$store.getters["tenants/getTenant"](this.tenantId);t&&(void 0!==t.completeData["MailWebclient::TenantSpaceLimitMb"]?(this.loading=!1,this.tenant=t,this.tenantSpaceLimitMb=t.completeData["MailWebclient::TenantSpaceLimitMb"],this.userSpaceLimitMb=t.completeData["MailWebclient::UserSpaceLimitMb"],this.allocatedSpace=t.completeData["MailWebclient::AllocatedSpaceMb"],this.allowChangeUserSpaceLimit=t.completeData["MailWebclient::AllowChangeUserSpaceLimit"]):this.getSettings())},save:function(){var t=this;if(!this.saving){this.saving=!0;var e={Type:"Tenant",TenantId:this.tenantId,UserSpaceLimitMb:c["a"].pInt(this.userSpaceLimitMb),TenantSpaceLimitMb:c["a"].pInt(this.tenantSpaceLimitMb)};o["a"].sendRequest({moduleName:"Mail",methodName:"UpdateEntitySpaceLimits",parameters:e}).then((function(a){if(t.saving=!1,!0===a){var i={"MailWebclient::UserSpaceLimitMb":e.UserSpaceLimitMb,"MailWebclient::TenantSpaceLimitMb":e.TenantSpaceLimitMb,"MailWebclient::AllocatedSpaceMb":t.allocatedSpace};t.$store.commit("tenants/setTenantCompleteData",{id:t.tenantId,data:i}),l["a"].showReport(t.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))}else l["a"].showError(t.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(e){t.saving=!1,l["a"].showError(n["a"].getTextFromResponse(e,t.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getSettings:function(){var t=this;this.loading=!0;var e={Type:"Tenant",TenantId:this.tenantId};o["a"].sendRequest({moduleName:"Mail",methodName:"GetEntitySpaceLimits",parameters:e}).then((function(e){if(t.loading=!1,e){var a={"MailWebclient::UserSpaceLimitMb":c["a"].pInt(e.UserSpaceLimitMb),"MailWebclient::TenantSpaceLimitMb":c["a"].pInt(e.TenantSpaceLimitMb),"MailWebclient::AllocatedSpaceMb":c["a"].pInt(e.AllocatedSpaceMb),"MailWebclient::AllowChangeUserSpaceLimit":c["a"].pBool(e.AllowChangeUserSpaceLimit)};t.$store.commit("tenants/setTenantCompleteData",{id:t.tenantId,data:a})}}),(function(t){l["a"].showError(n["a"].getTextFromResponse(t))}))}}},m=r,p=a("2877"),L=a("4983"),E=a("f09f"),d=a("a370"),S=a("27f9"),C=a("0170"),T=a("9c40"),v=a("74f7"),b=a("6b1d"),M=a("eebe"),I=a.n(M),u=Object(p["a"])(m,i,s,!1,null,"5f2191a8",null);e["default"]=u.exports;I()(u,"components",{QScrollArea:L["a"],QCard:E["a"],QCardSection:d["a"],QInput:S["a"],QItemLabel:C["a"],QBtn:T["a"],QInnerLoading:v["a"],QLinearProgress:b["a"]})}}]);