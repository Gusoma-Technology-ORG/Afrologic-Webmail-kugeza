(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"18eb":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-scroll-area",{staticClass:"full-height full-width"},[s("div",{staticClass:"q-pa-lg "},[s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"CPANELINTEGRATOR.HEADING_SETTINGS_TAB_ALIASES",expression:"'CPANELINTEGRATOR.HEADING_SETTINGS_TAB_ALIASES'"}],staticClass:"col text-h5"})]),s("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[s("q-card-section",[s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"CPANELINTEGRATOR.LABEL_ALIAS",expression:"'CPANELINTEGRATOR.LABEL_ALIAS'"}],staticClass:"col-2 q-mt-sm"}),s("div",{staticClass:"col-3"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:e.aliasName,callback:function(t){e.aliasName=t},expression:"aliasName"}})],1),s("div",{staticClass:"q-ml-sm q-mr-xs"},[s("span",{staticClass:"text-h6"},[s("b",[e._v("@")])])]),s("div",[s("q-select",{staticClass:"domains-select",attrs:{outlined:"",dense:"","bg-color":"white",options:e.domains,"option-label":"name"},model:{value:e.selectedDomain,callback:function(t){e.selectedDomain=t},expression:"selectedDomain"}})],1),s("div",{staticClass:"col-3 q-mt-xs q-ml-md"},[s("q-btn",{staticClass:"q-ml-md q-px-sm",attrs:{unelevated:"","no-caps":"","no-wrap":"",dense:"",disable:!e.aliasName.length,ripple:!1,color:"primary",label:e.$t("CPANELINTEGRATOR.ACTION_ADD_NEW_ALIAS")},on:{click:e.addNewAlias}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-5"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedAliases,expression:"selectedAliases"}],staticClass:"select",attrs:{size:"9",multiple:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedAliases=t.target.multiple?s:s[0]}}},e._l(e.aliasesList,(function(t){return s("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})),0)]),s("div",{staticClass:"col-3 q-mt-xs q-ml-md",staticStyle:{position:"relative"}},[s("div",{staticStyle:{position:"absolute",bottom:"3px"}},[s("q-btn",{staticClass:"q-ml-md q-px-sm",attrs:{unelevated:"","no-caps":"","no-wrap":"",dense:"",ripple:!1,color:"primary",label:e.$t("CPANELINTEGRATOR.ACTION_DELETE_ALIASES")},on:{click:e.deleteAliasesList}})],1)])])])],1)],1),s("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:e.loading||e.saving||e.deleting}},[s("q-linear-progress",{attrs:{query:""}})],1)],1)},i=[],n=(s("f108"),s("b2f5")),l=s.n(n),o=s("e539"),r=s("4245"),d=s("21ac"),c=s("6bfe"),u={name:"CpanelAliasesAdminSettingsPerUser",data:function(){return{loading:!1,saving:!1,deleting:!1,aliasName:"",selectedDomain:null,selectedAliases:[],aliasesList:[],user:null}},computed:{currentTenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},domains:function(){var e=this.$store.getters["maildomains/getDomains"];return c["a"].pArray(e[this.currentTenantId])}},watch:{domains:function(){this.domains.length>0&&(this.selectedDomain=this.domains[0])}},beforeRouteLeave:function(e,t,s){this.doBeforeRouteLeave(e,t,s)},mounted:function(){this.requestDomains(),this.parseRoute(),null===this.selectedDomain&&this.domains.length>0&&(this.selectedDomain=this.domains[0])},methods:{hasChanges:function(){return""!==this.aliasName},revertChanges:function(){this.aliasName=""},requestDomains:function(){this.$store.dispatch("maildomains/requestDomainsIfNecessary",{tenantId:this.currentTenantId})},parseRoute:function(){var e,t,s,a=c["a"].pPositiveInt(null===(e=this.$route)||void 0===e||null===(t=e.params)||void 0===t?void 0:t.id);(null===(s=this.user)||void 0===s?void 0:s.id)!==a&&(this.user={id:a},this.populate())},populate:function(){this.getSettings()},addNewAlias:function(){var e=this;if(!this.saving){var t,s;this.saving=!0;var a={UserId:null===(t=this.user)||void 0===t?void 0:t.id,AliasName:this.aliasName,AliasDomain:null===(s=this.selectedDomain)||void 0===s?void 0:s.name,TenantId:this.currentTenantId};console.log("parameters",a),o["a"].sendRequest({moduleName:"CpanelIntegrator",methodName:"AddNewAlias",parameters:a}).then((function(t){e.saving=!1,!0===t?(e.aliasName="",e.populate()):d["a"].showError(e.$t("COREWEBCLIENT.ERROR_DATA_TRANSFER_FAILED"))}),(function(t){e.saving=!1,d["a"].showError(r["a"].getTextFromResponse(t,e.$t("COREWEBCLIENT.ERROR_DATA_TRANSFER_FAILED")))}))}},deleteAliasesList:function(){var e=this;if(!this.deleting)if(this.deleting=!0,this.selectedAliases.length){var t,s={UserId:null===(t=this.user)||void 0===t?void 0:t.id,Aliases:this.selectedAliases,TenantId:this.tenantId};o["a"].sendRequest({moduleName:"CpanelIntegrator",methodName:"DeleteAlias",parameters:s}).then((function(t){e.deleting=!1,!0===t&&e.populate()}),(function(t){e.deleting=!1,d["a"].showError(r["a"].getTextFromResponse(t))}))}else this.deleting=!1,d["a"].showError(this.$t("CPANELINTEGRATOR.ERROR_EMPTY_ALIASES"))},getSettings:function(){var e,t=this;this.loading=!0;var s={UserId:null===(e=this.user)||void 0===e?void 0:e.id,TenantId:this.currentTenantId};o["a"].sendRequest({moduleName:"CpanelIntegrator",methodName:"GetAliases",parameters:s}).then((function(e){t.loading=!1,l.a.isArray(e.Aliases)&&(t.aliasesList=e.Aliases)}),(function(e){t.loading=!1,d["a"].showError(r["a"].getTextFromResponse(e))}))}}},m=u,h=(s("6e89"),s("2877")),v=s("4983"),A=s("f09f"),p=s("a370"),g=s("27f9"),f=s("ddd8"),E=s("9c40"),N=s("74f7"),I=s("6b1d"),T=s("eebe"),C=s.n(T),R=Object(h["a"])(m,a,i,!1,null,"42d70610",null);t["default"]=R.exports;C()(R,"components",{QScrollArea:v["a"],QCard:A["a"],QCardSection:p["a"],QInput:g["a"],QSelect:f["a"],QBtn:E["a"],QInnerLoading:N["a"],QLinearProgress:I["a"]})},"6e89":function(e,t,s){"use strict";s("b825")},b825:function(e,t,s){}}]);