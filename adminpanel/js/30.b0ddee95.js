(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"45cb":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-scroll-area",{staticClass:"full-height full-width"},[i("div",{staticClass:"q-pa-lg "},[i("div",{staticClass:"row q-mb-md"},[i("div",{directives:[{name:"t",rawName:"v-t",value:"TWOFACTORAUTH.HEADING_SETTINGS_TAB",expression:"'TWOFACTORAUTH.HEADING_SETTINGS_TAB'"}],staticClass:"col text-h5"})]),i("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[i("q-card-section",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-8"},[i("q-item-label",{attrs:{caption:""}},[i("div",{domProps:{innerHTML:t._s(t.inscriptionTwoFactorAuthentication)}})])],1)]),t.twoFactorAuthEnabled?i("div",{staticClass:"row q-mt-md"},[i("div",{staticClass:"col-8"},[i("q-btn",{staticClass:"q-px-xs",attrs:{unelevated:"","no-caps":"","no-wrap":"",dense:"",ripple:!1,color:"primary",label:t.$t("TWOFACTORAUTH.ACTION_DISABLE_TFA")},on:{click:t.showTwoFactorAuthenticationDialogue}})],1)]):t._e()])],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:t.confirmTwoFactorAuthentication,callback:function(e){t.confirmTwoFactorAuthentication=e},expression:"confirmTwoFactorAuthentication"}},[i("q-card",{staticStyle:{"min-width":"300px"}},[i("q-card-section",[i("span",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.CONFIRM_DISCARD_CHANGES",expression:"'COREWEBCLIENT.CONFIRM_DISCARD_CHANGES'"}]})]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:t.$t("TWOFACTORAUTH.ACTION_DISABLE_TFA")},on:{click:t.disableTwoFactorAuthentication}}),i("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:t.$t("COREWEBCLIENT.ACTION_CANCEL")},on:{click:function(e){t.confirmTwoFactorAuthentication=!1}}})],1)],1)],1),i("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:t.loading||t.saving}},[i("q-linear-progress",{attrs:{query:""}})],1)],1)},o=[],n=i("e539"),s=i("21ac"),r=i("4245"),c=i("6bfe"),u=i("b2f5"),l=i.n(u),d=i("11cb"),T={name:"TwoFactorAuthAdminSettingsPerUser",data:function(){return{user:null,loading:!1,saving:!1,twoFactorAuthEnabled:!1,confirmTwoFactorAuthentication:!1}},computed:{inscriptionTwoFactorAuthentication:function(){var t,e,i,a;return this.twoFactorAuthEnabled?this.$tc("TWOFACTORAUTH.INFO_TFA_ENABLED_FOR_USER",null===(t=this.user)||void 0===t?void 0:t.publicId,{USER:null===(e=this.user)||void 0===e?void 0:e.publicId}):this.$tc("TWOFACTORAUTH.INFO_TFA_DISABLED_FOR_USER",null===(i=this.user)||void 0===i?void 0:i.publicId,{USER:null===(a=this.user)||void 0===a?void 0:a.publicId})}},watch:{$route:function(t,e){this.parseRoute()}},mounted:function(){this.parseRoute()},methods:{disableTwoFactorAuthentication:function(){var t=this,e={UserId:this.user.id,TenantId:this.user.tenantId};n["a"].sendRequest({moduleName:"TwoFactorAuth",methodName:"DisableUserTwoFactorAuth",parameters:e}).then((function(e){t.confirmTwoFactorAuthentication=!1,e?(t.populate(),s["a"].showReport(t.$tc("TWOFACTORAUTH.REPORT_DISABLE_USER_TFA",t.user.publicId,{USER:t.user.publicId}))):s["a"].showError(t.$tc("TWOFACTORAUTH.ERROR_DISABLE_USER_TFA",t.user.publicId,{USER:t.user.publicId}))}),(function(e){t.confirmTwoFactorAuthentication=!1,s["a"].showError(r["a"].getTextFromResponse(e,t.$tc("TWOFACTORAUTH.ERROR_DISABLE_USER_TFA",t.user.publicId,{USER:t.user.publicId})))}))},showTwoFactorAuthenticationDialogue:function(){this.confirmTwoFactorAuthentication=!0},parseRoute:function(){var t,e,i,a=c["a"].pPositiveInt(null===(t=this.$route)||void 0===t||null===(e=t.params)||void 0===e?void 0:e.id);(null===(i=this.user)||void 0===i?void 0:i.id)!==a&&(this.user={id:a},this.populate())},populate:function(){var t=this;this.loading=!0;var e=this.$store.getters["tenants/getCurrentTenantId"];d["a"].getUser(e,this.user.id).then((function(e){var i=e.user,a=e.userId;a===t.user.id&&(t.loading=!1,i&&l.a.isFunction(null===i||void 0===i?void 0:i.getData)?(t.user=i,t.getUserSettings()):t.$emit("no-user-found"))}))},getUserSettings:function(){var t=this;this.loading=!0;var e={UserId:this.user.id,TenantId:this.user.tenantId};n["a"].sendRequest({moduleName:"TwoFactorAuth",methodName:"GetUserSettings",parameters:e}).then((function(e){t.loading=!1,e&&(t.twoFactorAuthEnabled=null===e||void 0===e?void 0:e.TwoFactorAuthEnabled)}),(function(e){t.loading=!1,s["a"].showError(r["a"].getTextFromResponse(e))}))}}},h=T,A=i("2877"),p=i("4983"),v=i("f09f"),F=i("a370"),m=i("0170"),E=i("9c40"),w=i("24e8"),R=i("4b7e"),I=i("74f7"),C=i("6b1d"),b=i("eebe"),f=i.n(b),g=Object(A["a"])(h,a,o,!1,null,"7093874a",null);e["default"]=g.exports;f()(g,"components",{QScrollArea:p["a"],QCard:v["a"],QCardSection:F["a"],QItemLabel:m["a"],QBtn:E["a"],QDialog:w["a"],QCardActions:R["a"],QInnerLoading:I["a"],QLinearProgress:C["a"]})}}]);