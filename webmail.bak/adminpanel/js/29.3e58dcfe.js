(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{"4e5f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-scroll-area",{staticClass:"full-height full-width"},[i("div",{staticClass:"q-pa-lg"},[i("div",{staticClass:"row q-mb-md"},[i("div",{staticClass:"col text-h5"},[t._v(t._s(t.$t("MAILWEBCLIENT.HEADING_SETTINGS_TAB")))])]),i("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[i("q-card-section",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-2"},[i("div",{staticClass:"q-my-sm"},[t._v("\n              "+t._s(t.$t("MAILWEBCLIENT.LABEL_USER_SPACE_LIMIT"))+"\n            ")])]),i("div",{staticClass:"col-4"},[i("div",{staticClass:"row"},[i("q-input",{staticClass:"col-4",attrs:{outlined:"",dense:"","bg-color":"white"},model:{value:t.userSpaceLimitMb,callback:function(e){t.userSpaceLimitMb=e},expression:"userSpaceLimitMb"}}),i("div",{directives:[{name:"t",rawName:"v-t",value:"COREWEBCLIENT.LABEL_MEGABYTES",expression:"'COREWEBCLIENT.LABEL_MEGABYTES'"}],staticClass:"q-ma-sm col-1"})],1)])])])],1),i("div",{staticClass:"q-pt-md text-right"},[i("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:t.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:t.updateSettingsForEntity}})],1)],1),i("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:t.loading||t.saving}},[i("q-linear-progress",{attrs:{query:""}})],1)],1)},s=[],n=i("b2f5"),r=i.n(n),o=i("4245"),l=i("21ac"),u=i("6bfe"),c=i("e539"),d=i("11cb"),v={name:"MailAdminSettingsPerUser",data:function(){return{user:null,userSpaceLimitMb:0,loading:!1,saving:!1}},watch:{$route:function(t,e){this.parseRoute()}},mounted:function(){this.parseRoute()},beforeRouteLeave:function(t,e,i){this.doBeforeRouteLeave(t,e,i)},methods:{hasChanges:function(){var t,e,i=r.a.isFunction(null===(t=this.user)||void 0===t?void 0:t.getData)?null===(e=this.user)||void 0===e?void 0:e.getData("Mail::UserSpaceLimitMb"):0;return this.userSpaceLimitMb!==i},revertChanges:function(){var t,e,i=r.a.isFunction(null===(t=this.user)||void 0===t?void 0:t.getData)?null===(e=this.user)||void 0===e?void 0:e.getData("Mail::UserSpaceLimitMb"):0;this.userSpaceLimitMb=i},parseRoute:function(){var t,e,i,a=u["a"].pPositiveInt(null===(t=this.$route)||void 0===t||null===(e=t.params)||void 0===e?void 0:e.id);(null===(i=this.user)||void 0===i?void 0:i.id)!==a&&(this.user={id:a},this.populate())},populate:function(){var t=this;this.loading=!0;var e=this.$store.getters["tenants/getCurrentTenantId"];d["a"].getUser(e,this.user.id).then((function(e){var i=e.user,a=e.userId;a===t.user.id&&(t.loading=!1,i&&r.a.isFunction(null===i||void 0===i?void 0:i.getData)?(t.user=i,t.userSpaceLimitMb=i.getData("Mail::UserSpaceLimitMb")):t.$emit("no-user-found"))}))},updateSettingsForEntity:function(){var t=this;if(!this.saving){var e;this.saving=!0;var i={Type:"User",UserId:null===(e=this.user)||void 0===e?void 0:e.id,TenantId:this.user.tenantId,UserSpaceLimitMb:u["a"].pInt(this.userSpaceLimitMb)};c["a"].sendRequest({moduleName:"Mail",methodName:"UpdateEntitySpaceLimits",parameters:i}).then((function(e){t.saving=!1,e?(d["a"].getUser(i.TenantId,i.EntityId).then((function(e){var a=e.user;a.updateData([{field:"Mail::UserSpaceLimitMb",value:i.UserSpaceLimitMb}]),t.populate()})),l["a"].showReport(t.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):l["a"].showError(t.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(e){t.saving=!1,l["a"].showError(o["a"].getTextFromResponse(e,t.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}}}},p=v,E=i("2877"),h=i("4983"),m=i("f09f"),S=i("a370"),L=i("27f9"),C=i("9c40"),g=i("74f7"),f=i("6b1d"),I=i("eebe"),b=i.n(I),T=Object(E["a"])(p,a,s,!1,null,null,null);e["default"]=T.exports;b()(T,"components",{QScrollArea:h["a"],QCard:m["a"],QCardSection:S["a"],QInput:L["a"],QBtn:C["a"],QInnerLoading:g["a"],QLinearProgress:f["a"]})}}]);