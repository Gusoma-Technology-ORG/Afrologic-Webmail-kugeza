(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"Yc/0":function(e,o,n){"use strict";var t=n("F/us"),i=n("EVdn"),s=n("0h2I"),a=n("RN+F"),r=n("ZP6a"),l=n("Yjhd"),u=n("o0Bx"),g=n("JFZZ"),h=n("IAk5"),m=n("HLSX"),d=n("xcwT"),p=n("hPb3"),L=n("kux+"),c=i("html");function w(){d.call(this,"MailLoginFormWebclient"),this.sCustomLogoUrl=L.CustomLogoUrl,this.sInfoText=L.InfoText,this.sBottomInfoHtmlText=L.BottomInfoHtmlText,this.username=s.observable(""),this.password=s.observable(""),this.usernameDom=s.observable(null),this.passwordDom=s.observable(null),this.usernameFocus=s.observable(!1),this.passwordFocus=s.observable(!1),this.loading=s.observable(!1),this.bUseSignMe=L.LoginSignMeType===Enums.LoginSignMeType.Unuse,this.signMe=s.observable(Enums.LoginSignMeType.DefaultOn===L.LoginSignMeType),this.signMeFocused=s.observable(!1),this.canBeLogin=s.computed((function(){return!this.loading()}),this),this.signInButtonText=s.computed((function(){return this.loading()?a.i18n("COREWEBCLIENT/ACTION_SIGN_IN_IN_PROGRESS"):a.i18n("COREWEBCLIENT/ACTION_SIGN_IN")}),this),this.loginCommand=l.createCommand(this,this.signIn,this.canBeLogin),this.username(L.DemoLogin||""),this.password(L.DemoPassword||""),this.shake=s.observable(!1).extend({autoResetToFalse:800}),this.bRtl=p.IsRTL,this.aLanguages=p.LanguageList,this.currentLanguage=s.observable(p.Language),this.bAllowChangeLanguage=L.AllowChangeLanguage&&!h.isMobile(),this.bUseDropdownLanguagesView=L.UseDropdownLanguagesView,this.headingSelectLanguage=s.computed((function(){var e=p.SiteName;return t.isEmpty(e)&&(e=a.i18n("MAILLOGINFORMWEBCLIENT/HEADING_DEFAULT_SITENAME")),a.i18n("MAILLOGINFORMWEBCLIENT/HEADING_SELECT_LANGUAGE",{SITENAME:e})}),this),this.domains=s.observableArray([]),this.selectedDomain=s.observable(""),this.firstDomain=s.computed((function(){return this.domains().length>0?this.domains()[0]:""}),this),this.selectedServer=s.observable(""),this.beforeButtonsControllers=s.observableArray([]),h.broadcastEvent("AnonymousUserForm::PopulateBeforeButtonsControllers",{ModuleName:"MailLoginFormWebclient",RegisterBeforeButtonsController:this.registerBeforeButtonsController.bind(this)}),h.broadcastEvent("MailLoginFormWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}t.extendOwn(w.prototype,d.prototype),w.prototype.ViewTemplate="MailLoginFormWebclient_LoginView",w.prototype.ViewConstructorName="CLoginView",w.prototype.onBind=function(){c.addClass("non-adjustable-valign")},w.prototype.onShow=function(){t.delay(t.bind((function(){""===this.username()&&this.usernameFocus(!0)}),this),1),u.send("MailLoginFormWebclient","GetMailDomains",{},(function(e,o){t.isArray(e.Result)&&this.domains(e.Result)}),this,1e5)},w.prototype.signIn=function(){if(this.username(i(this.usernameDom()).val()),this.password(i(this.passwordDom()).val()),!this.loading()){var e,o="",n=i.trim(this.password()),t=null;if(0===(e=i.trim(this.username())).length?t=this.usernameFocus:o=this.domains().length>1?this.selectedDomain():this.firstDomain(),e.length>0&&n.length>0){var s={Domain:o,Login:e,Password:n,Language:i.cookie("aurora-selected-lang")||"",SignMe:this.signMe()};h.broadcastEvent("AnonymousUserForm::PopulateFormSubmitParameters",{Module:"MailLoginFormWebclient",Parameters:s}),this.loading(!0),u.send("MailLoginFormWebclient","Login",s,this.onSystemLoginResponse,this,1e5)}else t?t(!0):0===n.length&&this.passwordFocus(!0),this.shake(!0)}},w.prototype.onSystemLoginResponseBase=function(e,o){!1===e.Result?(this.loading(!1),this.shake(!0),g.showErrorByCode(e,a.i18n("COREWEBCLIENT/ERROR_PASS_INCORRECT"))):(h.setAuthToken(e.Result.AuthToken),i.removeCookie("aurora-selected-lang"),""!==window.location.search&&null===r.getRequestParam("reset-pass")&&null===r.getRequestParam("invite-auth")&&null===r.getRequestParam("oauth")?r.clearAndReloadLocation(m.ie8AndBelow,!0):r.clearAndReloadLocation(m.ie8AndBelow,!1))},w.prototype.changeLanguage=function(e){e&&this.bAllowChangeLanguage&&(i.cookie("aurora-lang-on-login",e,{expires:30}),i.cookie("aurora-selected-lang",e,{expires:30}),window.location.reload())},w.prototype.registerBeforeButtonsController=function(e){this.beforeButtonsControllers.push(e)},w.prototype.onSystemLoginResponse=function(e,o){this.onSystemLoginResponseBase(e,o)},e.exports=new w},dAQs:function(e,o,n){"use strict";e.exports=function(e){n("xXiH"),n("fJbT");var o=n("AFLV"),t=n("IAk5"),i=n("kux+"),s=t.getUserRole()===window.Enums.UserRole.Anonymous;return i.init(e),!t.isPublic()&&s?t.isMobile()?{getLoginScreenView:function(){return n("Yc/0")},getHashModuleName:function(){return i.HashModuleName},beforeAppRunning:function(){o.isNonEmptyString(i.CustomLoginUrl)&&(window.location.href=i.CustomLoginUrl)}}:{getScreens:function(){var e={};return o.isNonEmptyString(i.CustomLoginUrl)||(e[i.HashModuleName]=function(){return n("Yc/0")}),e},beforeAppRunning:function(){o.isNonEmptyString(i.CustomLoginUrl)&&(window.location.href=i.CustomLoginUrl)}}:null}},"kux+":function(e,o,n){"use strict";var t=n("F/us"),i=n("AFLV");e.exports={ServerModuleName:"MailLoginFormWebclient",HashModuleName:"mail",AllowChangeLanguage:!1,CustomLoginUrl:"",CustomLogoUrl:"",DemoLogin:"",DemoPassword:"",InfoText:"",BottomInfoHtmlText:"",LoginSignMeType:Enums.LoginSignMeType.DefaultOff,UseDropdownLanguagesView:!1,init:function(e){var o=e.MailLoginFormWebclient,n=e.BrandingWebclient;t.isEmpty(o)||(this.ServerModuleName=i.pString(o.ServerModuleName,this.ServerModuleName),this.HashModuleName=i.pString(o.HashModuleName,this.HashModuleName),this.AllowChangeLanguage=i.pBool(o.AllowChangeLanguage,this.AllowChangeLanguage),this.CustomLoginUrl=i.pString(o.CustomLoginUrl,this.CustomLoginUrl),this.DemoLogin=i.pString(o.DemoLogin,this.DemoLogin),this.DemoPassword=i.pString(o.DemoPassword,this.DemoPassword),this.InfoText=i.pString(o.InfoText,this.InfoText),this.BottomInfoHtmlText=i.pString(o.BottomInfoHtmlText,this.BottomInfoHtmlText),this.LoginSignMeType=i.pEnum(o.LoginSignMeType,Enums.LoginSignMeType,this.LoginSignMeType),this.UseDropdownLanguagesView=i.pBool(o.UseDropdownLanguagesView,this.UseDropdownLanguagesView)),t.isEmpty(n)||(this.CustomLogoUrl=i.pString(n.LoginLogo,this.CustomLogoUrl))}}},xXiH:function(e,o,n){"use strict";var t=n("F/us"),i={LoginSignMeType:{DefaultOff:0,DefaultOn:1,Unuse:2}};void 0===window.Enums&&(window.Enums={}),t.extendOwn(window.Enums,i)}}]);