(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{QFUI:function(t,i,e){"use strict";var s,o,n=e("RN+F"),r=e("76Kh"),a=e("1grR"),h=e("hPb3"),l={};l.getDownloadLink=function(t,i,e){return i.length>0?"?/Download/"+t+"/DownloadFile/"+i+"/"+(e?"0/"+e:""):""},l.getIframeWrappwer=function(t,i){return"?/Raw/Iframe/"+t+"/"+window.encodeURIComponent(i)+"/"},l.thumbQueue=(s={},o={},function(t,i,e){i&&e?!(t in o)||o[t]>0?(t in o||(o[t]=2,s[t]=[]),o[t]--,e(i)):s[t].push({imageSrc:i,imageSrcObserver:e,messageUid:t}):s[t]&&s[t].length&&(s[t][0].imageSrcObserver(s[t][0].imageSrc),s[t].shift())}),l.showErrorIfAttachmentSizeLimit=function(t,i){var e=n.i18n("COREWEBCLIENT/ERROR_UPLOAD_SIZE_DETAILED",{FILENAME:t,MAXSIZE:n.getFriendlySize(h.AttachmentSizeLimit)});return h.AttachmentSizeLimit>0&&i>h.AttachmentSizeLimit&&(r.showPopup(a,[e]),!0)},t.exports=l},VRPG:function(t,i,e){"use strict";t.exports=function(t){var i=e("wd/R"),s=e("IAk5"),o=e("cGGv");return s.isUserNormalOrTenant()?{start:function(){var e=t.OfficeDocumentViewer?t.OfficeDocumentViewer.ExtensionsToView:[];o.addViewExtensions(e),s.subscribeEvent("AbstractFileModel::FileView::before",(function(t){t.sUrl&&(t.sUrl+="&"+i().unix())}))}}:null}},cGGv:function(t,i,e){"use strict";var s=e("F/us"),o=e("EVdn"),n=e("0h2I"),r=e("wd/R"),a=e("IAk5"),h=e("QFUI"),l=e("RN+F"),u=e("AFLV"),c=e("ZP6a"),p=e("Yjhd"),d=e("ZCBP"),b=["image/jpeg","image/jpg","image/png","image/gif","text/html","text/plain","text/css","text/rfc822-headers","message/delivery-status","application/x-httpd-php","application/javascript"],m=[];function f(){this.id=n.observable(""),this.index=n.observable(0),this.fileName=n.observable(""),this.tempName=n.observable(""),this.displayName=n.observable(""),this.extension=n.observable(""),this.fileName.subscribe((function(t){this.id(t),this.displayName(t),this.extension(p.getFileExtension(t))}),this),this.size=n.observable(0),this.friendlySize=n.computed((function(){return this.size()>0?l.getFriendlySize(this.size()):""}),this),this.hash=n.observable(""),this.thumbUrlInQueue=n.observable(""),this.thumbUrlInQueueSubscribtion=this.thumbUrlInQueue.subscribe((function(){this.getInThumbQueue()}),this),this.thumbnailSrc=n.observable(""),this.thumbnailLoaded=n.observable(!1),this.thumbnailSessionUid=n.observable(""),this.mimeType=n.observable(""),this.uploadUid=n.observable(""),this.uploaded=n.observable(!1),this.uploadError=n.observable(!1),this.downloading=n.observable(!1),this.isViewMimeType=n.computed((function(){return-1!==o.inArray(this.mimeType(),b)}),this),this.bHasHtmlEmbed=!1,this.otherTemplates=n.observableArray([]),this.visibleCancelButton=n.observable(!0),this.statusText=n.observable(""),this.statusTooltip=n.computed((function(){return this.uploadError()?this.statusText():""}),this),this.progressPercent=n.observable(0),this.visibleProgress=n.observable(!1),this.uploadStarted=n.observable(!1),this.uploadStarted.subscribe((function(){this.uploadStarted()?(this.uploaded(!1),this.visibleProgress(!0),this.progressPercent(20)):(this.progressPercent(100),this.visibleProgress(!1),this.uploaded(!0))}),this),this.downloading.subscribe((function(){this.downloading()?this.visibleProgress(!0):(this.visibleProgress(!1),this.progressPercent(0))}),this),this.allowDrag=n.observable(!1),this.allowUpload=n.observable(!1),this.allowPublicLink=n.observable(!1),this.bIsSecure=n.observable(!1),this.isShared=n.observable(!1),this.sHeaderText="",this.oActionsData={view:{Text:l.i18n("COREWEBCLIENT/ACTION_VIEW_FILE"),HandlerName:"viewFile"},download:{Text:l.i18n("COREWEBCLIENT/ACTION_DOWNLOAD_FILE"),HandlerName:"downloadFile",Tooltip:n.computed((function(){var t=l.i18n("COREWEBCLIENT/INFO_CLICK_TO_DOWNLOAD_FILE",{FILENAME:this.fileName(),SIZE:this.friendlySize()});return""===this.friendlySize()&&(t=t.replace(" ()","")),t}),this)}},this.allowActions=n.observable(!0),this.iconAction=n.observable("download"),this.cssClasses=n.computed((function(){return this.getCommonClasses().join(" ")}),this),this.actions=n.observableArray([]),this.firstAction=n.computed((function(){return this.actions().length>1?this.actions()[0]:""}),this),this.secondAction=n.computed((function(){return 1===this.actions().length?this.actions()[0]:this.actions().length>1?this.actions()[1]:""}),this),this.subFiles=n.observableArray([]),this.subFilesExpanded=n.observable(!1),this.sUploadSubFolder="",this.bIsHidden=!1}o("html").hasClass("pdf")&&(b.push("application/pdf"),b.push("application/x-pdf")),f.prototype.addAction=function(t,i,e){i?this.actions.unshift(t):this.actions.push(t),this.actions(s.compact(this.actions())),e&&(this.oActionsData[t]=e)},f.prototype.removeAction=function(t){this.actions(s.without(this.actions(),t))},f.prototype.getMainAction=function(){return this.actions()[0]},f.prototype.hasAction=function(t){return-1!==s.indexOf(this.actions(),t)},f.prototype.getActionText=function(t){return this.hasAction(t)&&this.oActionsData[t]&&("string"==typeof this.oActionsData[t].Text||s.isFunction(this.oActionsData[t].Text))?s.isFunction(this.oActionsData[t].Text)?this.oActionsData[t].Text():this.oActionsData[t].Text:""},f.prototype.getActionUrl=function(t){return this.hasAction(t)&&this.oActionsData[t]&&this.oActionsData[t].Url||""},f.prototype.executeAction=function(t){var i=this.hasAction(t)&&this.oActionsData[t];i&&(s.isFunction(i.Handler)?i.Handler():"string"==typeof i.HandlerName&&s.isFunction(this[i.HandlerName])&&this[i.HandlerName]())},f.prototype.getTooltip=function(t){var i=this.hasAction(t)&&this.oActionsData[t]?this.oActionsData[t].Tooltip:"";return"string"==typeof i?i:s.isFunction(i)?i():""},f.prototype.getCommonClasses=function(){var t=[];return(this.allowUpload()&&!this.uploaded()||this.downloading())&&t.push("incomplete"),this.uploadError()?t.push("fail"):t.push("success"),t},f.prototype.parse=function(t){this.fileName(u.pString(t.FileName)),this.tempName(u.pString(t.TempName)),""===this.tempName()&&this.tempName(this.fileName()),this.mimeType(u.pString(t.MimeType)),this.size(t.EstimatedSize?u.pInt(t.EstimatedSize):u.pInt(t.SizeInBytes)),this.hash(u.pString(t.Hash)),this.parseActions(t),this.uploadUid(this.hash()),this.uploaded(!0),o.isFunction(this.additionalParse)&&this.additionalParse(t)},f.prototype.parseActions=function(t){this.thumbUrlInQueue(""!==u.pString(t.ThumbnailUrl)?u.pString(t.ThumbnailUrl)+"/"+Math.random():""),this.commonParseActions(t),this.commonExcludeActions()},f.prototype.commonExcludeActions=function(){this.isViewSupported()||this.actions(s.without(this.actions(),"view"))},f.prototype.commonParseActions=function(t){s.each(t.Actions,(function(t,i){this.oActionsData[i]||(this.oActionsData[i]={}),this.oActionsData[i].Url=u.pString(t.url),this.actions.push(i)}),this)},f.addViewExtensions=function(t){s.isArray(t)&&(m=s.union(m,t))},f.prototype.isViewSupported=function(){return-1!==o.inArray(this.mimeType(),b)||-1!==o.inArray(this.extension(),m)},f.prototype.getInThumbQueue=function(){""===this.thumbUrlInQueue()||this.linked&&(!this.linked||this.linked())||(this.thumbnailSessionUid(Date.now().toString()),h.thumbQueue(this.thumbnailSessionUid(),this.thumbUrlInQueue(),this.thumbnailSrc))},f.prototype.downloadFile=function(t){var i=this.getActionUrl("download"),e={File:this,CancelDownload:!1};i.length>0&&"#"!==i&&(t||a.broadcastEvent("AbstractFileModel::FileDownload::before",e),e.CancelDownload||(s.isFunction(e.CustomDownloadHandler)?e.CustomDownloadHandler():(i+="/"+r().unix(),c.downloadByUrl(i,"eml"===this.extension()))))},f.prototype.viewFile=function(t,i){p.calmEvent(i),this.viewCommonFile()},f.prototype.viewCommonFile=function(t){var i=null,e=null;u.isNonEmptyString(t)||(t=c.getAppPath()+this.getActionUrl("view")),t.length>0&&"#"!==t&&(e={sUrl:t+="/"+r().unix(),index:this.index(),bBreakView:!1},a.broadcastEvent("AbstractFileModel::FileView::before",e),e.bBreakView||(i=d.open(e.sUrl,e.sUrl,!1))&&i.focus())},f.prototype.eventDragStart=function(t,i){var e=i.originalEvent||i;return t&&e&&e.dataTransfer&&e.dataTransfer.setData&&e.dataTransfer.setData("DownloadURL",this.generateTransferDownloadUrl()),!0},f.prototype.generateTransferDownloadUrl=function(){var t=this.getActionUrl("download");return"http"!==t.substr(0,4)&&(t=c.getAppPath()+t),this.mimeType()+":"+this.fileName()+":"+t},f.prototype.onUploadSelect=function(t,i,e){e||(this.fileName(u.pString(i.FileName)),this.mimeType(u.pString(i.Type)),this.size(u.pInt(i.Size))),this.uploadUid(t),this.uploaded(!1),this.statusText(""),this.progressPercent(0),this.visibleProgress(!1),this.sUploadSubFolder=u.pString(i.Folder),this.bIsHidden=""!==this.sUploadSubFolder},f.prototype.onUploadStart=function(){this.visibleProgress(!0)},f.prototype.onUploadProgress=function(t,i){i>0&&(this.progressPercent(Math.ceil(t/i*100)),this.visibleProgress(!0))},f.prototype.onDownloadProgress=function(t,i){i>0&&(this.progressPercent(Math.ceil(t/i*100)),this.visibleProgress(this.progressPercent()<100))},f.prototype.onUploadComplete=function(t,i,e){var s,o=!(i&&e&&!e.ErrorCode&&e.Result&&!e.Result.Error),n=e&&e.ErrorCode&&e.ErrorCode===Enums.Errors.CanNotUploadFileLimit?l.i18n("COREWEBCLIENT/ERROR_UPLOAD_SIZE"):l.i18n("COREWEBCLIENT/ERROR_UPLOAD_UNKNOWN");this.progressPercent(0),this.visibleProgress(!1),this.uploaded(!0),this.uploadError(o),this.statusText(o?n:l.i18n("COREWEBCLIENT/REPORT_UPLOAD_COMPLETE")),o||(this.fillDataAfterUploadComplete(e,t),setTimeout((s=this,function(){s.statusText("")}),3e3))},f.prototype.fillDataAfterUploadComplete=function(t,i){},f.prototype.onImageLoad=function(t,i){""===this.thumbUrlInQueue()||this.thumbnailLoaded()||(this.thumbnailLoaded(!0),h.thumbQueue(this.thumbnailSessionUid()))},f.prototype.stopDownloading=function(){this.downloading(!1)},f.prototype.startDownloading=function(){this.downloading(!0)},t.exports=f}}]);