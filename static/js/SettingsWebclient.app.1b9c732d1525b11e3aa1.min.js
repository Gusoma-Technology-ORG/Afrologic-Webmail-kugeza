(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{Aybv:function(e,t,i){"use strict";var s=i("F/us"),n=i("0h2I"),a=i("RN+F"),r=i("o0Bx"),o=i("JFZZ"),h=i("SQrT"),u=i("76Kh"),c=i("20Ah");function b(e){this.sServerModule=e||"Core",this.isSaving=n.observable(!1),this.visible=n.observable(!0),this.sSavedState="",this.bShown=!1,this.SettingsTabName="",this.SettingsTabTitle="",this.aSettingsSections=[]}b.prototype.ViewTemplate="",b.prototype.addSettingsSection=function(e){this.aSettingsSections.push(e)},b.prototype.showTab=function(e){this.bShown=!0,this.revert(),s.isFunction(this.onShow)&&this.onShow(e),s.each(this.aSettingsSections,(function(t){s.isFunction(t.onShow)&&t.onShow(e)}))},b.prototype.hasUnsavedChanges=function(){var e=this.getCurrentState()!==this.sSavedState;return s.each(this.aSettingsSections,(function(t){s.isFunction(t.getCurrentState)&&(e=e||t.getCurrentState()!==t.sSavedState)})),e},b.prototype.hide=function(e,t){this.hasUnsavedChanges()?u.showPopup(c,[a.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),s.bind((function(i){i?(this.bShown=!1,e(),this.revert()):s.isFunction(t)&&t()}),this)]):(this.bShown=!1,e())},b.prototype.getCurrentValues=function(){return[]},b.prototype.getCurrentState=function(){return this.getCurrentValues().join(":")},b.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},b.prototype.revertGlobalValues=function(){},b.prototype.revert=function(){s.each(this.aSettingsSections,(function(e){s.isFunction(e.revert)&&e.revert()})),this.revertGlobalValues(),this.updateSavedState()},b.prototype.getParametersForSave=function(){return{}},b.prototype.save=function(){s.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),r.send(this.sServerModule,"UpdateSettings",this.getParametersForSave(),this.onResponse,this))},b.prototype.applySavedValues=function(e){},b.prototype.onResponse=function(e,t){if(this.isSaving(!1),e.Result){var i=t.Parameters;this.updateSavedState(),this.applySavedValues(i),h.showReport(a.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else o.showErrorByCode(e,a.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},b.prototype.setAccessLevel=function(e,t){},e.exports=b},"Ig+v":function(e,t,i){var s=i("0h2I"),n=i("QaF5");function a(e){this.sName="",this.visible=s.observable(!0),this.baseHash=s.observable(""),this.hash=s.observable(""),this.linkText=s.observable(e),this.isCurrent=s.observable(!1),this.recivedAnim=s.observable(!1).extend({autoResetToFalse:500}),this.unseenCount=s.observable(0),this.allowChangeTitle=s.observable(!1),this.inactiveTitle=s.observable(""),this.excludedHashes=s.observableArray([])}a.prototype.ViewTemplate="CoreWebclient_HeaderItemView",a.prototype.setName=function(e){this.sName=e.toLowerCase(),""===this.baseHash()?(this.hash(n.buildHashFromArray([e.toLowerCase()])),this.baseHash(this.hash())):this.hash(this.baseHash())},e.exports=a},kdpN:function(e,t,i){"use strict";var s=i("F/us"),n=i("AFLV");e.exports={HashModuleName:"settings",TabsOrder:["common","mail","mail-accounts","contacts","calendar","files","mobilesync","outlooksync","helpdesk","openpgp"],init:function(e){var t=e.SettingsWebclient;s.isEmpty(t)||(this.TabsOrder=n.pArray(t.TabsOrder,this.TabsOrder))}}},nkxw:function(e,t,i){"use strict";e.exports=function(e){var t=i("IAk5"),s=t.getUserRole()===Enums.UserRole.SuperAdmin,n=null;if(s||t.isUserNormalOrTenant()){var a=i("kdpN");if(a.init(e),s)return{getAbstractSettingsFormViewClass:function(){return i("Aybv")}};if(t.isUserNormalOrTenant())return{getScreens:function(){var e={};return e[a.HashModuleName]=function(){return i("qrIc")},e},getHeaderItem:function(){if(null===n){var e=i("RN+F"),t=i("Ig+v");n=new t(e.i18n("COREWEBCLIENT/HEADING_SETTINGS_TABNAME"))}return{item:n,name:a.HashModuleName}},registerSettingsTab:function(e,t,s){i("qrIc").registerTab(e,t,s)},registerSettingsTabSection:function(e,t,s){i("qrIc").registerTabSection(e,t,s)},getAbstractSettingsFormViewClass:function(){return i("Aybv")},setAddHash:function(e){i("qrIc").setAddHash(e)}}}return null}},qrIc:function(e,t,i){"use strict";var s=i("F/us"),n=i("EVdn"),a=i("0h2I"),r=i("IAk5"),o=i("QaF5"),h=i("xcwT"),u=i("kdpN"),c=n("html");function b(){h.call(this,"SettingsWebclient"),this.tabs=a.observableArray([]),this.currentTab=a.observable(null),r.subscribeEvent("OpenSettingTab",s.bind((function(e){this.changeTab(e.Name)}),this)),r.broadcastEvent("SettingsWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}s.extendOwn(b.prototype,h.prototype),b.prototype.ViewTemplate="SettingsWebclient_SettingsView",b.prototype.ViewConstructorName="CSettingsView",b.prototype.registerTab=function(e,t,i){var n=u.TabsOrder.length,a=e(),r=s.findWhere(this.tabs(),{name:t});s.isEmpty(a)||(a.SettingsTabName=t,a.SettingsTabTitle=i,r&&(s.isArray(r.sections)&&(s.each(r.sections,(function(e){a.addSettingsSection(e)})),delete r.sections),r.view=a)),r||this.tabs.push({view:a,name:t}),this.tabs(s.sortBy(this.tabs(),(function(e){var t=s.indexOf(u.TabsOrder,e.name);return-1!==t?t:n})))},b.prototype.registerTabSection=function(e,t){var i=s.findWhere(this.tabs(),{name:t}),n=e();i?i.view.addSettingsSection(n):(this.registerTab((function(){return{visible:a.observable(!1)}}),t,""),(i=s.findWhere(this.tabs(),{name:t}))&&(s.isArray(i.sections)||(i.sections=[]),i.sections.push(n)))},b.prototype.hasUnsavedChanges=function(){var e=this.currentTab();return e&&e.view&&s.isFunction(e.view.hasUnsavedChanges)&&e.view.hasUnsavedChanges()},b.prototype.discardChanges=function(){var e=this.currentTab();e&&e.view&&s.isFunction(e.view.revert)&&e.view.revert()},b.prototype.onShow=function(){c.addClass("non-adjustable")},b.prototype.onHide=function(){var e=this.currentTab();e&&s.isFunction(e.view.hide)&&e.view.hide((function(){}),(function(){})),c.removeClass("non-adjustable")},b.prototype.onRoute=function(e){var t=e.shift(),i=this.currentTab(),n=s.find(this.tabs(),(function(e){return e.name===t})),a=function(){n&&(s.isFunction(n.view.showTab)&&n.view.showTab(e),this.currentTab(n),n.name!==t&&o.replaceHashDirectly([u.HashModuleName,n.name]))}.bind(this),r=s.bind((function(){i&&o.replaceHashDirectly([u.HashModuleName,i.name])}),this),h=!0;i&&t===i.name?s.isFunction(i.view.showTab)&&i.view.showTab(e):(n&&n.view.visible&&!n.view.visible()&&(n=s.find(this.tabs(),(function(e){return!e.view.visible||e.view.visible()}))),n?i&&s.isFunction(i.view.hide)&&(i.view.hide(a,r),h=!1):i||(n=s.find(this.tabs(),(function(e){return!e.view.visible||e.view.visible()}))),h&&a())},b.prototype.changeTab=function(e){o.setHash([u.HashModuleName,e])},b.prototype.setAddHash=function(e){o.setHash(s.union([u.HashModuleName,this.currentTab()?this.currentTab().name:""],e))},e.exports=new b}}]);