(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"61ci":function(t,e,i){"use strict";var n=i("F/us"),s=i("EVdn"),r=i("0h2I"),a=i("RN+F"),o=i("AFLV"),h=i("ZP6a");t.exports={ServerModuleName:"Core",HashModuleName:"admin",EntitiesPerPage:20,TabsOrder:["licensing","admin-security","admin-db","logs-viewer","system","common","modules"],EntitiesOrder:[],EnableMultiTenant:!1,startError:r.observable(""),init:function(t){var e=t.AdminPanelWebclient,i=t.Core;n.isEmpty(e)||(this.EntitiesPerPage=o.pPositiveInt(e.EntitiesPerPage,this.EntitiesPerPage),this.TabsOrder=o.pArray(e.TabsOrder,this.TabsOrder),this.EntitiesOrder=o.pArray(e.EntitiesOrder,this.EntitiesOrder)),n.isEmpty(i)||(this.EnableMultiTenant=o.pBool(i.EnableMultiTenant,this.EnableMultiTenant)),this.setStartError()},setStartError:function(){s.ajax({url:h.getAppPath()+"data/settings/config.json",type:"GET",async:!0,dataType:"json",complete:function(t,e){"success"===e&&this.startError(a.i18n("ADMINPANELWEBCLIENT/ERROR_DATA_FOLDER_ACCESSIBLE_FROM_WEB"))}.bind(this),timeout:5e4})},getStartError:function(){return this.startError}}},"Ig+v":function(t,e,i){var n=i("0h2I"),s=i("QaF5");function r(t){this.sName="",this.visible=n.observable(!0),this.baseHash=n.observable(""),this.hash=n.observable(""),this.linkText=n.observable(t),this.isCurrent=n.observable(!1),this.recivedAnim=n.observable(!1).extend({autoResetToFalse:500}),this.unseenCount=n.observable(0),this.allowChangeTitle=n.observable(!1),this.inactiveTitle=n.observable(""),this.excludedHashes=n.observableArray([])}r.prototype.ViewTemplate="CoreWebclient_HeaderItemView",r.prototype.setName=function(t){this.sName=t.toLowerCase(),""===this.baseHash()?(this.hash(s.buildHashFromArray([t.toLowerCase()])),this.baseHash(this.hash())):this.hash(this.baseHash())},t.exports=r},"KSC/":function(t,e,i){"use strict";var n=i("F/us"),s=i("EVdn"),r=i("0h2I"),a=i("9oTK"),o=i("RN+F"),h=i("AFLV"),u=i("IAk5"),c=i("SQrT"),E=i("QaF5"),l=i("xcwT"),d=i("YUUU"),p=i("pvQt"),T=i("TAkd"),b=i("61ci"),y=i("o0Wm");function f(){l.call(this,"AdminPanelWebclient"),this.tenants=p.tenants,this.selectedTenant=p.selectedTenant,this.currentEntityType=r.observable(""),this.currentEntitiesId=r.observable({}),this.lastSavedEntitiesId=r.observable({}),this.showTenantsSelector=r.computed((function(){return b.EnableMultiTenant&&this.tenants().length>1}),this),this.bShowLogout=u.getUserRole()===Enums.UserRole.SuperAdmin,this.aScreens=[],u.getUserRole()===Enums.UserRole.SuperAdmin&&this.aScreens.push({linkHash:r.observable(E.buildHashFromArray(d.get(""))),sLinkText:o.i18n("ADMINPANELWEBCLIENT/HEADING_SYSTEM_SETTINGS_TABNAME"),sType:"",oView:null}),n.each(T.getData(),n.bind((function(t){var e=new y(t.Type),i=n.bind((function(t,e,i){if("create"===i)this.openCreateEntity();else if(t===this.currentEntityType())this.changeEntity(t,e,i||"");else{var s=n.clone(this.currentEntitiesId());h.isNumber(e)?t&&(s[t]=e,delete s[this.currentEntityType()]):s[t]&&delete s[t],E.replaceHash(d.get(this.currentEntityType(),s,""))}}),this);e.setChangeEntityHandler(i),this.aScreens.push({linkHash:r.computed((function(){var e=n.clone(this.lastSavedEntitiesId());return n.extend(e,this.currentEntitiesId()),E.buildHashFromArray(d.get(t.Type,e))}),this),sLinkText:o.i18n(t.LinkTextKey),sType:t.Type,oView:e})}),this)),this.currentEntitiesView=r.computed((function(){var t=this.currentEntityType(),e=n.find(this.aScreens,(function(e){return e.sType===t}));return e?e.oView:null}),this),this.currentEntitiesView.subscribe((function(){this.currentEntitiesView()&&this.currentEntitiesView().onHide()}),this,"beforeChange"),this.currentEntitiesView.subscribe((function(){this.currentEntitiesView()&&this.currentEntitiesView().onShow()}),this),this.tabs=r.observableArray([]),this.visibleTabsCount=r.computed((function(){var t=0;return n.each(this.tabs(),(function(e){e.view&&(void 0===e.view.visible||e.view.visible())&&t++})),t}),this),this.showModulesTabs=r.computed((function(){return""===this.currentEntityType()||this.currentEntitiesView().hasSelectedEntity()}),this),this.currentTab=r.observable(null),this.aStartErrors=[],u.subscribeEvent("SendAjaxRequest::before",this.onAjaxSend.bind(this)),u.broadcastEvent("AdminPanelWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}n.extendOwn(f.prototype,l.prototype),f.prototype.ViewTemplate="AdminPanelWebclient_SettingsView",f.prototype.ViewConstructorName="CSettingsView",f.prototype.onAjaxSend=function(t){""===this.currentEntityType()||t.Parameters.TenantId||(t.Parameters.TenantId=p.selectedTenantId())},f.prototype.selectTenant=function(t){if(!this.currentEntitiesView()||"Tenant"!==this.currentEntitiesView().sType||this.currentEntitiesView().hasEntity(t)){var e=n.clone(this.currentEntitiesId());e.Tenant=t,E.setHash(d.get(this.currentEntityType(),e))}else{var i=n.findIndex(p.tenants(),(function(e){return e.Id===t})),s=Math.ceil((i+1)/b.EntitiesPerPage);this.currentEntitiesView().setPageAndEntity(s,t)}},f.prototype.registerTab=function(t,e,i){if(n.isFunction(t)){var s=this.tabs;return new a(t).then((function(t){s.push({view:t,name:e,title:i})}),(function(t){console.log("failed to load settings tab",t)}))}return!1},f.prototype.sortRegisterTabs=function(){this.tabs(n.sortBy(this.tabs(),(function(t){var e=n.indexOf(b.TabsOrder,t.name);return-1!==e?e:b.TabsOrder.length})))},f.prototype.registerTabSection=function(t,e){var i=n.findWhere(this.tabs(),{name:e}),s=t();i&&i.view.addSettingsSection(s)},f.prototype.cancelCreatingEntity=function(){E.setHash(d.get(this.currentEntityType(),this.currentEntitiesId(),""))},f.prototype.openCreateEntity=function(){if(T.getEntityData(this.currentEntityType()).CreateRequest){var t=n.clone(this.currentEntitiesId());delete t[this.currentEntityType()],"Tenant"!==this.currentEntityType()&&!t.Tenant&&p.selectedTenantId()&&(t.Tenant=p.selectedTenantId()),E.setHash(d.get(this.currentEntityType(),t,"create"))}},f.prototype.changeEntity=function(t,e,i){var s=n.clone(this.currentEntitiesId()),r=!!n.find(this.tabs(),(function(t){return t.name===i})),a=this.currentTab()?this.currentTab().name:"";t&&(s[t]=e),"Tenant"!==t&&p.selectedTenantId()&&(s.Tenant=p.selectedTenantId()),E.setHash(d.get(t,s,r?i:a))},f.prototype.onBind=function(){if(n.each(this.tabs(),n.bind((function(t){if(t.view&&n.isFunction(t.view.getStartError)){var e=t.view.getStartError();n.isFunction(e)&&(e.subscribe((function(){this.showStartError()}),this),this.aStartErrors.push(e))}}),this)),b&&n.isFunction(b.getStartError)){var t=b.getStartError();n.isFunction(t)&&(t.subscribe((function(){this.showStartError()}),this),this.aStartErrors.push(t))}this.showStartError()},f.prototype.showStartError=function(){var t=[];n.each(this.aStartErrors,(function(e){var i=e();""!==i&&t.push(i)})),c.showError(t.join("<br /><br />"),!0)},f.prototype.onRoute=function(t){var e=d.parse(t);if(!n.find(this.aScreens,(function(t){return t.sType===e.CurrentType}))&&this.aScreens.length>0)E.replaceHash(d.get(this.aScreens[0].sType,[],""));else{var i=t.slice(1),r=this.currentEntityType()===e.CurrentType,a=this.currentEntitiesId()[e.CurrentType]===e.Entities[e.CurrentType],o=this.currentTab()&&this.currentTab().name===e.Last,h=JSON.stringify(this.currentEntitiesId())===JSON.stringify(e.Entities),u=this.currentTab(),c=n.bind((function(){this.showNewScreenView(e),this.showNewTabView(e.Last,i)}),this),l=n.bind((function(){u&&(E.stopListening(),E.setPreviousHash(),E.startListening())}),this);r&&a&&o&&h?u&&u.view.onRoute(i,this.currentEntitiesId()):u&&s.isFunction(u.view.hide)?u.view.hide(c,l):c()}},f.prototype.showNewScreenView=function(t){var e=n.find(this.aScreens,(function(e){return e.sType===t.CurrentType}));if(this.currentEntityType(t.CurrentType),this.currentEntitiesId(t.Entities),n.isEmpty(t.Entities)||this.lastSavedEntitiesId(t.Entities),p.setSelectedTenant(t.Entities.Tenant),e&&e.oView){var i=e.oView.oEntityData?e.oView.oEntityData.CreateRequest:"";"create"===t.Last&&h.isNonEmptyString(i)?e.oView.openCreateForm():e.oView.cancelCreatingEntity(),e.oView.changeEntity(t.Entities[t.CurrentType],t.Entities)}},f.prototype.showNewTabView=function(t,e){n.each(this.tabs(),n.bind((function(t){t.view&&n.isFunction(t.view.setAccessLevel)&&(t.view.setAccessLevel(this.currentEntityType(),this.currentEntitiesId()[this.currentEntityType()]),n.each(t.view.aSettingsSections,(function(t){n.isFunction(t.setAccessLevel)&&t.setAccessLevel(this.currentEntityType(),this.currentEntitiesId()[this.currentEntityType()])}),this))}),this));var i=n.find(this.tabs(),(function(e){return e.name===t}));i&&i.view&&i.view.visible()||(i=n.find(this.tabs(),(function(t){return t.view&&t.view.visible()}))),i&&(s.isFunction(i.view.onRoute)&&i.view.onRoute(e,this.currentEntitiesId()),this.currentTab(i))},f.prototype.changeTab=function(t){var e=this.currentEntityType()?this.currentEntitiesId():{};E.setHash(d.get(this.currentEntityType(),e,t))},f.prototype.logout=function(){u.logout()},f.prototype.deleteCurrentEntity=function(){this.currentEntitiesView()&&this.currentEntitiesView().deleteCurrentEntity()},f.prototype.setAddHash=function(t){E.setHash(n.union([b.HashModuleName,this.currentTab()?this.currentTab().name:""],t))},t.exports=new f},TAkd:function(t,e,i){"use strict";var n=i("F/us"),s=i("RN+F"),r=i("61ci");function a(){this.aData=[],r.EnableMultiTenant&&this.aData.push({Type:"Tenant",ScreenHash:"tenants",LinkTextKey:"ADMINPANELWEBCLIENT/HEADING_TENANTS_SETTINGS_TABNAME",EditView:i("yF5f"),ServerModuleName:r.ServerModuleName,GetListRequest:"GetTenants",GetRequest:"GetTenant",CreateRequest:"CreateTenant",UpdateRequest:"UpdateTenant",DeleteRequest:"DeleteTenants",NoEntitiesFoundText:s.i18n("ADMINPANELWEBCLIENT/INFO_NO_ENTITIES_FOUND_TENANT"),ActionCreateText:s.i18n("ADMINPANELWEBCLIENT/ACTION_CREATE_ENTITY_TENANT"),ReportSuccessCreateText:s.i18n("ADMINPANELWEBCLIENT/REPORT_CREATE_ENTITY_TENANT"),ErrorCreateText:s.i18n("ADMINPANELWEBCLIENT/ERROR_CREATE_ENTITY_TENANT"),CommonSettingsHeadingText:s.i18n("COREWEBCLIENT/HEADING_COMMON_SETTINGS"),ReportSuccessUpdate:s.i18n("ADMINPANELWEBCLIENT/REPORT_UPDATE_ENTITY_TENANT"),ErrorUpdate:s.i18n("ADMINPANELWEBCLIENT/ERROR_UPDATE_ENTITY_TENANT"),ActionDeleteText:s.i18n("ADMINPANELWEBCLIENT/ACTION_DELETE_TENANT"),ConfirmDeleteLangConst:"ADMINPANELWEBCLIENT/CONFIRM_DELETE_TENANT_PLURAL",ReportSuccessDeleteLangConst:"ADMINPANELWEBCLIENT/REPORT_DELETE_ENTITIES_TENANT_PLURAL",ErrorDeleteLangConst:"ADMINPANELWEBCLIENT/ERROR_DELETE_ENTITIES_TENANT_PLURAL"}),this.aData.push({Type:"User",ScreenHash:"users",LinkTextKey:"ADMINPANELWEBCLIENT/HEADING_USERS_SETTINGS_TABNAME",EditView:i("qdYY"),ServerModuleName:r.ServerModuleName,GetListRequest:"GetUsers",GetRequest:"GetUser",CreateRequest:"CreateUser",UpdateRequest:"UpdateUser",DeleteRequest:"DeleteUsers",NoEntitiesFoundText:s.i18n("ADMINPANELWEBCLIENT/INFO_NO_ENTITIES_FOUND_USER"),ActionCreateText:s.i18n("ADMINPANELWEBCLIENT/ACTION_CREATE_ENTITY_USER"),ReportSuccessCreateText:s.i18n("ADMINPANELWEBCLIENT/REPORT_CREATE_ENTITY_USER"),ErrorCreateText:s.i18n("ADMINPANELWEBCLIENT/ERROR_CREATE_ENTITY_USER"),CommonSettingsHeadingText:s.i18n("COREWEBCLIENT/HEADING_COMMON_SETTINGS"),ReportSuccessUpdate:s.i18n("ADMINPANELWEBCLIENT/REPORT_UPDATE_ENTITY_USER"),ErrorUpdate:s.i18n("ADMINPANELWEBCLIENT/ERROR_UPDATE_ENTITY_USER"),ActionDeleteText:s.i18n("ADMINPANELWEBCLIENT/ACTION_DELETE_USER"),ConfirmDeleteLangConst:"ADMINPANELWEBCLIENT/CONFIRM_DELETE_USER_PLURAL",ReportSuccessDeleteLangConst:"ADMINPANELWEBCLIENT/REPORT_DELETE_ENTITIES_USER_PLURAL",ErrorDeleteLangConst:"ADMINPANELWEBCLIENT/ERROR_DELETE_ENTITIES_USER_PLURAL",EntitiesCountText:s.i18n("ADMINPANELWEBCLIENT/LABEL_USERS_COUNT")}),this.sortEntitiesData()}a.prototype.getData=function(){return this.aData},a.prototype.getEntityData=function(t){return n.find(this.aData,(function(e){return e.Type===t}))},a.prototype.getEditView=function(t){var e=this.getEntityData(t);return e?e.EditView:null},a.prototype.registerEntityType=function(t){this.aData.push(t),this.sortEntitiesData()},a.prototype.sortEntitiesData=function(){this.aData=n.sortBy(this.aData,(function(t){var e=n.indexOf(r.EntitiesOrder,t.Type);return-1!==e?e:r.EntitiesOrder.length}))},a.prototype.changeEntityData=function(t){var e=this.getEntityData(t.Type);e&&n.each(t,(function(t,i){"Filters"===i&&n.isArray(e[i])&&n.isArray(t)?e[i]=e[i].concat(t):e[i]=t}))},t.exports=new a},YUUU:function(t,e,i){"use strict";var n=i("F/us"),s=i("AFLV"),r=i("TAkd"),a=i("61ci"),o={};o.get=function(t,e,i,o,h){var u=[a.HashModuleName],c=!0;return e=e||[],n.each(r.getData(),(function(i){c&&(s.isPositiveNumber(e[i.Type])?"User"===i.Type&&"MailingList"===t||u.push(i.ScreenHash.substr(0,1)+e[i.Type]):t===i.Type&&u.push(i.ScreenHash),t===i.Type&&(c=!1))})),s.isPositiveNumber(o)&&o>1&&u.push("p."+o),s.isNonEmptyString(h)&&u.push("s."+h),s.isNonEmptyString(i)&&u.push(i),u},o.parse=function(t){var e=0,i={},a="",o=1,h="",u="";return n.each(r.getData(),(function(n){t[e]&&n.ScreenHash===t[e]&&(a=n.Type,e++),t[e]&&n.ScreenHash.substr(0,1)===t[e].substr(0,1)&&s.pInt(t[e].substr(1))>0&&(i[n.Type]=s.pInt(t[e].substr(1)),a=n.Type,e++),t.length>e&&function(t){return"p."===t.substr(0,1)&&/^[1-9][\d]*$/.test(t.substr("p.".length))}(u=s.pString(t[e]))&&((o=s.pInt(u.substr("p.".length)))<=0&&(o=1),e++),t.length>e&&function(t){return"s."===t.substr(0,"s.".length)}(u=s.pString(t[e]))&&(h=u.substr("s.".length),e++)})),{Entities:i,CurrentType:a,Last:s.isNonEmptyString(t[e])?t[e]:"",Page:o,Search:h}},t.exports=o},fIp0:function(t,e,i){"use strict";var n=i("F/us"),s=i("EVdn"),r=i("0h2I"),a=i("Yjhd"),o=i("IAk5");function h(t,e){this.bShown=!1,this.currentPage=r.observable(1),this.count=r.observable(t),this.perPage=r.observable(e),this.firstPage=r.observable(1),this.lastPage=r.observable(1),this.pagesCount=r.computed((function(){var t=this.perPage()>0?Math.ceil(this.count()/this.perPage()):0;return t>0?t:1}),this),r.computed((function(){var t=20,e=4,i=this.pagesCount(),n=this.currentPage(),s=n,r=n;if(i>1)for(;t--,1<s&&(s--,e--),0!==e&&(i>r&&(r++,e--),0!==e)&&0!==t;);this.firstPage(s),this.lastPage(r)}),this),this.visibleFirst=r.computed((function(){return this.firstPage()>1}),this),this.visibleLast=r.computed((function(){return this.lastPage()<this.pagesCount()}),this),this.clickPage=n.bind(this.clickPage,this),this.pages=r.computed((function(){var t=this.firstPage(),e=[];if(this.firstPage()<this.lastPage())for(;t<=this.lastPage();t++)e.push({number:t,current:t===this.currentPage(),clickFunc:this.clickPage});return e}),this),o.isMobile()||this.hotKeysBind()}h.prototype.ViewTemplate="CoreWebclient_PageSwitcherView",h.prototype.hotKeysBind=function(){s(document).on("keydown",s.proxy((function(t){if(this.bShown&&!a.isTextFieldFocused()){var e=t.keyCode;t.ctrlKey&&e===Enums.Key.Left?this.clickPreviousPage():t.ctrlKey&&e===Enums.Key.Right&&this.clickNextPage()}}),this))},h.prototype.hide=function(){this.bShown=!1},h.prototype.show=function(){this.bShown=!0},h.prototype.clear=function(){this.currentPage(1),this.count(0)},h.prototype.setCount=function(t){this.count(t),this.currentPage()>this.pagesCount()&&this.currentPage(this.pagesCount())},h.prototype.setPage=function(t,e){this.perPage(e),t>this.pagesCount()?this.currentPage(this.pagesCount()):this.currentPage(t)},h.prototype.clickPage=function(t){var e=t.number;e<1&&(e=1),e>this.pagesCount()&&(e=this.pagesCount()),this.currentPage(e)},h.prototype.clickFirstPage=function(){this.currentPage(1)},h.prototype.clickPreviousPage=function(){var t=this.currentPage()-1;t<1&&(t=1),this.currentPage(t)},h.prototype.clickNextPage=function(){var t=this.currentPage()+1;t>this.pagesCount()&&(t=this.pagesCount()),this.currentPage(t)},h.prototype.clickLastPage=function(){this.currentPage(this.pagesCount())},t.exports=h},jz7t:function(t,e,i){"use strict";var n=i("RN+F"),s=i("Ig+v");t.exports=new s(n.i18n("ADMINPANELWEBCLIENT/HEADING_TENANT_ADMINPANEL_SETTINGS_TABNAME"))},o0Wm:function(t,e,i){"use strict";var n=i("F/us"),s=i("0h2I"),r=i("RN+F"),a=i("AFLV"),o=i("Yjhd"),h=i("o0Bx"),u=i("JFZZ"),c=i("IAk5"),E=i("SQrT"),l=i("fIp0"),d=i("76Kh"),p=i("20Ah"),T=i("pvQt"),b=i("TAkd"),y=i("61ci");function f(t){this.bToolbarDisabled=c.getUserRole()===Enums.UserRole.TenantAdmin&&"Tenant"===t,T.selectedTenantId.subscribe((function(){"Tenant"!==this.sType&&this.requestEntities()}),this),this.sType=t,this.oEntityCreateView=b.getEditView(this.sType),this.oEntityData=b.getEntityData(this.sType),this.sActionCreateText=this.oEntityData.ActionCreateText,this.sNoEntitiesFoundText=this.oEntityData.NoEntitiesFoundText,this.entities=s.observableArray([]),this.aFilters=[],this.initFilters(),this.errorMessage=s.observable(""),this.totalEntitiesCount=s.observable(0),this.entitiesCountText=s.computed((function(){return this.oEntityData.EntitiesCountText?this.oEntityData.EntitiesCountText.replace(/%COUNT%/g,this.totalEntitiesCount()):""}),this),this.current=s.observable(0),this.showCreateForm=s.observable(!1),this.isCreating=s.observable(!1),this.hasSelectedEntity=s.computed((function(){return!!n.find(this.entities(),function(t){return t.Id===this.current()}.bind(this))}),this),this.idToDisplayAfterGetTenants=s.observable(0),this.fChangeEntityHandler=function(){},s.computed((function(){0===this.idToDisplayAfterGetTenants()&&!this.showCreateForm()&&!this.hasSelectedEntity()&&this.entities().length>0&&this.fChangeEntityHandler(this.sType,this.entities()[0].Id)}),this).extend({throttle:1}),this.checkedEntities=s.computed((function(){return n.filter(this.entities(),(function(t){return t.checked()}),this)}),this),this.hasCheckedEntities=s.computed((function(){return this.checkedEntities().length>0}),this),this.deleteCommand=o.createCommand(this,this.deleteCheckedEntities,this.hasCheckedEntities),this.selectedCount=s.computed((function(){return this.checkedEntities().length}),this),this.searchValue=s.observable(""),this.newSearchValue=s.observable(""),this.isSearchFocused=s.observable(!1),this.loading=s.observable(!1),this.searchText=s.computed((function(){return r.i18n("ADMINPANELWEBCLIENT/INFO_SEARCH_RESULT",{SEARCH:this.searchValue()})}),this),this.oPageSwitcher=new l(0,y.EntitiesPerPage),this.oPageSwitcher.currentPage.subscribe((function(){this.requestEntities()}),this),this.totalEntitiesCount.subscribe((function(){this.oPageSwitcher.setCount(this.totalEntitiesCount())}),this),this.aIdListDeleteProcess=[],this.aAdditionalButtons=[],this.initAdditionalButtons()}f.prototype.ViewTemplate="AdminPanelWebclient_EntitiesView",f.prototype.CreateFormViewTemplate="AdminPanelWebclient_EntityCreateFormView",f.prototype.onShow=function(){this.bShown=!0,this.requestEntities()},f.prototype.onHide=function(){this.bShown=!1},f.prototype.hasEntity=function(t){return!!n.find(this.entities(),(function(e){return e.Id===t}))},f.prototype.setPageAndEntity=function(t,e){this.oPageSwitcher.currentPage()!==t&&(this.idToDisplayAfterGetTenants(e),this.oPageSwitcher.setPage(t,y.EntitiesPerPage))},f.prototype.search=function(){this.oPageSwitcher.setPage(1,y.EntitiesPerPage),this.requestEntities()},f.prototype.clearSearch=function(){this.newSearchValue(""),this.requestEntities()},f.prototype.initFilters=function(){n.each(this.oEntityData.Filters,function(t){var e={list:s.computed((function(){var e=[];return n.isFunction(t.mList)?(e=t.mList(),n.isArray(e)||(e=[])):n.isArray(t.mList)&&(e=t.mList),e.length>0&&(t.sAllText&&e.unshift({text:t.sAllText,value:-1}),t.sNotInAnyText&&e.push({text:t.sNotInAnyText,value:0})),e}),this),selectedValue:s.observable(-1),requestValue:s.observable(-1),sAllText:t.sAllText,sFileld:t.sField,sEntity:t.sEntity};e.selectedValue.subscribe((function(){e.sEntity?this.fChangeEntityHandler(e.sEntity,e.selectedValue()):e.requestValue(e.selectedValue())}),this),e.requestValue.subscribe((function(){this.requestEntities()}),this),this.aFilters.push(e)}.bind(this))},f.prototype.initAdditionalButtons=function(){n.each(this.oEntityData.AdditionalButtons,function(t){t&&t.ButtonView&&(n.isFunction(t.ButtonView.init)&&t.ButtonView.init(this.hasCheckedEntities,this.checkedEntities),this.aAdditionalButtons.push(t))}.bind(this))},f.prototype.requestEntities=function(){if(this.bShown&&("Tenant"===this.sType||a.isPositiveNumber(T.selectedTenantId()))){var t=this.sType,e={TenantId:T.selectedTenantId(),Type:t,Offset:(this.oPageSwitcher.currentPage()-1)*y.EntitiesPerPage,Limit:y.EntitiesPerPage,Search:this.newSearchValue()};n.each(this.aFilters,(function(t){e[t.sFileld]=t.requestValue()})),this.searchValue(this.newSearchValue()),this.loading(!0),this.errorMessage(""),h.send(this.oEntityData.ServerModuleName,this.oEntityData.GetListRequest,e,(function(e){if(this.loading(!1),e.Result){var i=n.isArray(e.Result.Items)?e.Result.Items:[],r=[],o=a.pInt(e.Result.Count);n.each(i,(function(e){e&&e.Id&&(e.Id=a.pInt(e.Id),e.bItsMe="Tenant"===t&&e.Id===c.getTenantId()||"User"===t&&e.Id===c.getUserId(),e.bIsDefault=!!e.IsDefault,e.checked=s.observable(!1),e.trottleChecked=function(t,e){e.stopPropagation(),this.bItsMe||this.bIsDefault||this.checked(!this.checked())},r.push(e))})),this.entities(r),this.totalEntitiesCount(o),0===this.entities().length?this.fChangeEntityHandler(t,void 0,"create"):0!==this.idToDisplayAfterGetTenants()&&this.fChangeEntityHandler(t,this.idToDisplayAfterGetTenants()),this.aIdListDeleteProcess=[]}else a.isNonEmptyString(e.ErrorMessage)?this.errorMessage(e.ErrorMessage):u.showErrorByCode(e),this.entities([])}),this)}},f.prototype.setChangeEntityHandler=function(t){this.fChangeEntityHandler=t},f.prototype.changeEntity=function(t,e){n.each(this.aFilters,function(t){e[t.sEntity]?(t.selectedValue(e[t.sEntity]),t.requestValue(e[t.sEntity])):t.selectedValue()<=0?t.requestValue(t.selectedValue()):(t.selectedValue(-1),t.requestValue(-1))}.bind(this)),this.current(a.pInt(t)),this.idToDisplayAfterGetTenants(0)},f.prototype.openCreateForm=function(){this.showCreateForm(!0),this.oEntityCreateView.clearFields()},f.prototype.cancelCreatingEntity=function(){this.showCreateForm(!1)},f.prototype.createEntity=function(){if(this.oEntityCreateView&&("Tenant"===this.sType||a.isPositiveNumber(T.selectedTenantId()))&&(!n.isFunction(this.oEntityCreateView.isValidSaveData)||this.oEntityCreateView.isValidSaveData())){var t=this.oEntityCreateView.getParametersForSave();t.TenantId=T.selectedTenantId(),this.isCreating(!0),h.send(this.oEntityData.ServerModuleName,this.oEntityData.CreateRequest,t,(function(t){t.Result?(E.showReport(this.oEntityData.ReportSuccessCreateText),this.idToDisplayAfterGetTenants(a.pInt(t.Result)),this.oEntityCreateView.updateSavedState(),this.cancelCreatingEntity()):u.showErrorByCode(t,this.oEntityData.ErrorCreateText),this.requestEntities(),this.isCreating(!1)}),this)}},f.prototype.deleteCurrentEntity=function(){this.deleteEntities([this.current()])},f.prototype.deleteCheckedEntities=function(){var t=n.map(this.checkedEntities(),(function(t){return t.Id}));this.deleteEntities(t)},f.prototype.deleteEntities=function(t){if(this.oEntityData.DeleteRequest&&(a.isNonEmptyArray(this.aIdListDeleteProcess)?(t=n.difference(t,this.aIdListDeleteProcess),this.aIdListDeleteProcess=n.union(t,this.aIdListDeleteProcess)):this.aIdListDeleteProcess=t,t.length>0)){var e="",i=1===t.length?n.find(this.entities(),(function(e){return e.Id===t[0]})):null,s={Type:this.sType,Count:t.length,ConfirmText:r.i18n(this.oEntityData.ConfirmDeleteLangConst,{},null,t.length)};i&&(e=i.Name||i.PublicId),c.broadcastEvent("ConfirmDeleteEntity::before",s),d.showPopup(p,[s.ConfirmText,n.bind(this.confirmedDeleteEntities,this,t),e,r.i18n("COREWEBCLIENT/ACTION_DELETE")])}},f.prototype.confirmedDeleteEntities=function(t,e){if(e&&a.isPositiveNumber(T.selectedTenantId())){var i={TenantId:T.selectedTenantId(),Type:this.sType,IdList:t,DeletionConfirmedByAdmin:!0};h.send(this.oEntityData.ServerModuleName,this.oEntityData.DeleteRequest,i,(function(e){e.Result?E.showReport(r.i18n(this.oEntityData.ReportSuccessDeleteLangConst,{},null,t.length)):u.showErrorByCode(e,r.i18n(this.oEntityData.ErrorDeleteLangConst,{},null,t.length)),this.requestEntities()}),this)}else this.aIdListDeleteProcess=[]},f.prototype.groupCheck=function(){var t=!this.hasCheckedEntities();n.each(this.entities(),(function(e){e.bItsMe||e.bIsDefault||e.checked(t)}))},t.exports=f},pSwp:function(t,e,i){"use strict";t.exports=function(t){var e=i("9oTK"),n=i("IAk5");if(n.getUserRole()===Enums.UserRole.SuperAdmin||n.getUserRole()===Enums.UserRole.TenantAdmin){var s=i("F/us"),r=i("RN+F"),a=i("pvQt"),o=i("61ci"),h=[],u=[],c=[],E=[];return o.init(t),a.init(t),{start:function(){n.getUserRole()===Enums.UserRole.SuperAdmin&&(c.push({GetTabView:function(t){i.e(26).then(function(){t(i("BRgg"))}.bind(null,i)).catch(i.oe)},TabName:o.HashModuleName+"-db",TabTitle:r.i18n("ADMINPANELWEBCLIENT/LABEL_DB_SETTINGS_TAB")}),c.push({GetTabView:function(t){i.e(26).then(function(){t(i("ko8N"))}.bind(null,i)).catch(i.oe)},TabName:o.HashModuleName+"-security",TabTitle:r.i18n("ADMINPANELWEBCLIENT/LABEL_SECURITY_SETTINGS_TAB")}),c.push({GetTabView:function(t){i.e(26).then(function(){t(i("4iw0"))}.bind(null,i)).catch(i.oe)},TabName:"about",TabTitle:r.i18n("ADMINPANELWEBCLIENT/LABEL_ABOUT_SETTINGS_TAB")})),c.push({GetTabView:function(t){i.e(26).then(function(){t(i("QrcW"))}.bind(null,i)).catch(i.oe)},TabName:"common",TabTitle:r.i18n("ADMINPANELWEBCLIENT/LABEL_COMMON_SETTINGS_TAB")})},getScreens:function(){var t={};return t[o.HashModuleName]=function(){return new e((function(t,n){i.e(26).then(function(n){var r=i("TAkd");s.each(h,(function(t){r.registerEntityType(t)})),s.each(u,(function(t){r.changeEntityData(t)}));var a=i("KSC/"),o=[];s.each(c,(function(t){var e=a.registerTab(t.GetTabView,t.TabName,t.TabTitle);e&&o.push(e)})),e.all(o).then((function(){a.sortRegisterTabs(),t(a),s.each(E,(function(t){a.registerTabSection(t.GetTabView,t.TabName,t.TabTitle)}))}),(function(){a.sortRegisterTabs(),t(a),s.each(E,(function(t){a.registerTabSection(t.GetTabView,t.TabName,t.TabTitle)}))}))}.bind(null,i)).catch(i.oe)}))},t},getHeaderItem:function(){return n.getUserRole()===Enums.UserRole.SuperAdmin?null:{item:i("jz7t"),name:o.HashModuleName}},getAbstractSettingsFormViewClass:function(){return i("yYIs")},registerAdminPanelTab:function(t,e,i){c.push({GetTabView:t,TabName:e,TabTitle:i})},registerAdminPanelTabSection:function(t,e){E.push({GetTabView:t,TabName:e})},showEntities:function(t,e){var n=i("QaF5"),s=i("YUUU");n.setHash(s.get(t,e,""))},setAddHash:function(t){i("KSC/").setAddHash(t)},registerAdminPanelEntityType:function(t){h.push(t)},changeAdminPanelEntityData:function(t){u.push(t)},getKoSelectedTenantId:function(){return a.selectedTenantId},getTenantsObservable:function(){return a.tenants}}}return null}},pvQt:function(t,e,i){"use strict";var n=i("F/us"),s=i("0h2I"),r=i("AFLV"),a=i("o0Bx"),o=i("IAk5"),h=i("hPb3"),u=i("61ci");function c(){this.tenants=s.observableArray([]),this.selectedTenantId=s.observable(0),this.selectedTenant=s.computed((function(){return n.find(this.tenants(),function(t){return t.Id===this.selectedTenantId()}.bind(this))||{Name:""}}),this),h.dbSettingsChanged.subscribe((function(){h.dbSettingsChanged()&&a.send(u.ServerModuleName,"GetTenants")})),this.bTenantsChanged=!1}c.prototype.init=function(t){o.subscribeEvent("ReceiveAjaxResponse::after",this.onAjaxResponse.bind(this));var e=t.AdminPanelWebclient;this.parseTenants(e?e.Tenants:[])},c.prototype.onAjaxResponse=function(t){if(t.Response.Module===u.ServerModuleName)switch(t.Response.Method){case"CreateTables":a.send(u.ServerModuleName,"GetTenants");break;case"CreateTenant":case"DeleteTenants":this.bTenantsChanged=!0;break;case"GetTenants":var e=r.pString(t.Request.Parameters.Search),i=r.pInt(t.Request.Parameters.Offset),n=r.pInt(t.Request.Parameters.Limit);""===e&&0===i&&0===n?this.parseTenants(t.Response.Result):this.bTenantsChanged&&a.send(u.ServerModuleName,"GetTenants"),this.bTenantsChanged=!1}},c.prototype.setSelectedTenant=function(t){n.find(this.tenants(),(function(e){return e.Id===t}))&&this.selectedTenantId(t)},c.prototype.parseTenants=function(t){var e=this.selectedTenantId(),i=!1,s=t&&n.isArray(t.Items)?t.Items:[],a=[];n.each(s,(function(t){var n={Name:t.Name,Id:r.pInt(t.Id)};n.Id===e&&(i=!0),a.push(n)})),i||this.selectedTenantId(a.length>0?a[0].Id:0),this.tenants(a)},t.exports=new c},qdYY:function(t,e,i){"use strict";var n=i("F/us"),s=i("EVdn"),r=i("0h2I"),a=i("RN+F"),o=i("IAk5"),h=i("SQrT"),u=i("61ci");function c(){this.id=r.observable(0),this.publicId=r.observable(""),this.bAllowMakeTenant=u.EnableMultiTenant&&o.getUserRole()===Enums.UserRole.SuperAdmin,this.tenantAdminSelected=r.observable(!1),this.writeSeparateLog=r.observable(!1),this.sHeading=a.i18n("ADMINPANELWEBCLIENT/HEADING_CREATE_USER"),this.sActionCreate=a.i18n("COREWEBCLIENT/ACTION_CREATE"),this.sActionCreateInProgress=a.i18n("COREWEBCLIENT/ACTION_CREATE_IN_PROGRESS"),o.broadcastEvent("AdminPanelWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}c.prototype.ViewTemplate="AdminPanelWebclient_EditUserView",c.prototype.ViewConstructorName="CEditUserView",c.prototype.getCurrentValues=function(){return[this.id(),this.publicId(),this.tenantAdminSelected(),this.writeSeparateLog()]},c.prototype.clearFields=function(){this.id(0),this.publicId(""),this.tenantAdminSelected(!1),this.writeSeparateLog(!1)},c.prototype.parse=function(t,e){e?(this.id(t),this.publicId(e.PublicId),this.tenantAdminSelected(e.Role===Enums.UserRole.TenantAdmin),this.writeSeparateLog(!!e.WriteSeparateLog)):this.clearFields()},c.prototype.isValidSaveData=function(){var t=""!==s.trim(this.publicId());return t||h.showError(a.i18n("ADMINPANELWEBCLIENT/ERROR_USER_NAME_EMPTY")),t},c.prototype.getParametersForSave=function(){return{UserId:this.id(),PublicId:s.trim(this.publicId()),Role:this.tenantAdminSelected()?Enums.UserRole.TenantAdmin:Enums.UserRole.NormalUser,WriteSeparateLog:this.writeSeparateLog(),Forced:!0}},c.prototype.saveEntity=function(t,e){n.each(t,(function(t){n.isFunction(t.createEntity)?t.createEntity():n.isFunction(t.save)&&t.save(e)}))},t.exports=new c},yF5f:function(t,e,i){"use strict";(function(e){var n=i("F/us"),s=i("0h2I"),r=i("RN+F"),a=i("AFLV"),o=i("IAk5"),h=i("SQrT");function u(t,e){switch(t.FieldType){case"bool":return a.pBool(e);case"int":return a.pInt(e);default:return a.pString(e)}}function c(){var t,e;this.bAllowEditWebDomain=o.getUserRole()===Enums.UserRole.SuperAdmin,this.id=s.observable(0),this.name=s.observable(""),this.description=s.observable(""),this.webDomain=s.observable(""),this.siteName=s.observable(""),this.sHeading=r.i18n("ADMINPANELWEBCLIENT/HEADING_CREATE_TENANT"),this.sActionCreate=r.i18n("COREWEBCLIENT/ACTION_CREATE"),this.sActionCreateInProgress=r.i18n("COREWEBCLIENT/ACTION_CREATE_IN_PROGRESS"),this.aAdditionalFields=(t="Tenant",e=a.pArray(window.auroraAppData&&window.auroraAppData.additional_entity_fields_to_edit),n.filter(e,(function(e){return e.value=s.observable(u(e,"")),e.Entity===t})))}c.prototype.ViewTemplate="AdminPanelWebclient_EditTenantView",c.prototype.getCurrentValues=function(){var t=[this.id(),this.name(),this.description(),this.webDomain(),this.siteName()];return n.each(this.aAdditionalFields,(function(e){t.push(e.value())})),t},c.prototype.clearFields=function(){this.id(0),this.name(""),this.description(""),this.webDomain(""),this.siteName(""),n.each(this.aAdditionalFields,(function(t){t.value(u(t,""))}))},c.prototype.parse=function(t,e){e?(this.id(t),this.name(e.Name),this.description(e.Description),this.webDomain(e.WebDomain),this.siteName(e.SiteName),n.each(this.aAdditionalFields,(function(t){t.value(u(t,e[t.FieldName])),t.EnableOnCreate=a.pBool(t.EnableOnCreate,!0),t.EnableOnEdit=a.pBool(t.EnableOnEdit,!0)}))):this.clearFields()},c.prototype.isValidSaveData=function(){return""===e.trim(this.name())?(h.showError(r.i18n("ADMINPANELWEBCLIENT/ERROR_TENANT_NAME_EMPTY")),!1):!/[\\\/\:\*\?\\\"\<\>\|]/gi.test(this.name())||(h.showError(r.i18n("ADMINPANELWEBCLIENT/ERROR_TENANT_NAME_INVALID")),!1)},c.prototype.getParametersForSave=function(){var t={TenantId:this.id(),Name:this.name(),Description:this.description(),WebDomain:this.webDomain(),SiteName:this.siteName()};return n.each(this.aAdditionalFields,(function(e){var i=e.value();"int"===e.FieldType&&(i=a.pInt(i)),t[e.FieldName]=i})),t},t.exports=new c}).call(this,i("EVdn"))},yYIs:function(t,e,i){"use strict";var n=i("F/us"),s=i("0h2I"),r=i("RN+F"),a=i("o0Bx"),o=i("JFZZ"),h=i("SQrT"),u=i("76Kh"),c=i("20Ah");function E(t,e){this.sServerModule=t||"Core",this.sUpdateSettingsMethod=e||"UpdateSettings",this.isSaving=s.observable(!1),this.visible=s.observable(!0),this.sSavedState="",this.bShown=!1,this.aSettingsSections=[]}E.prototype.ViewTemplate="",E.prototype.addSettingsSection=function(t){this.aSettingsSections.push(t)},E.prototype.onRoute=function(t){var e=!this.bShown;this.bShown=!0,e&&n.isFunction(this.onShow)&&this.onShow(),this.revert(),n.isFunction(this.onRouteChild)&&this.onRouteChild(t),n.each(this.aSettingsSections,(function(e){n.isFunction(e.onShow)&&e.onShow(t)}))},E.prototype.hide=function(t,e){var i=this.getCurrentState()!==this.sSavedState;n.each(this.aSettingsSections,(function(t){n.isFunction(t.getCurrentState)&&(i=i||t.getCurrentState()!==t.sSavedState)})),i?u.showPopup(c,[r.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),n.bind((function(i){i?(this.bShown=!1,t(),this.revert()):n.isFunction(e)&&e()}),this)]):(this.bShown=!1,t())},E.prototype.getCurrentValues=function(){return[]},E.prototype.getCurrentState=function(){return this.getCurrentValues().join(":")},E.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},E.prototype.revertGlobalValues=function(){},E.prototype.revert=function(){n.each(this.aSettingsSections,(function(t){n.isFunction(t.revert)&&t.revert()})),this.revertGlobalValues(),this.updateSavedState()},E.prototype.getParametersForSave=function(){return{}},E.prototype.save=function(){n.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),a.send(this.sServerModule,this.sUpdateSettingsMethod,this.getParametersForSave(),this.onResponse,this))},E.prototype.applySavedValues=function(t){},E.prototype.onResponse=function(t,e){if(this.isSaving(!1),t.Result){var i=e.Parameters;this.updateSavedState(),this.applySavedValues(i),h.showReport(r.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else o.showErrorByCode(t,r.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},E.prototype.setAccessLevel=function(t,e){},t.exports=E}}]);